# 專案分析頁面開發檢查清單

## 📋 總體進度
- [x] 階段 1：建立專案資料載入基礎架構 ✅ 2025-01-02
- [x] 階段 2：實現 UC (使用案例) 功能 ✅ 2025-01-02
- [x] 階段 3：實現 SD (循序圖) 功能 ✅ 2025-01-02
- [x] 階段 4：實現 API 合約功能 ✅ 2025-01-02
- [x] 階段 5：實現 DTO 功能 ✅ 2025-01-02
- [ ] 階段 6：整合 AI 助手功能（跳過）
- [x] 階段 7：整體測試與優化（部分完成）✅ 2025-01-02

---

## 階段 1：建立專案資料載入基礎架構 ✅ 完成
### 前端實現
- [x] 在 `SystemAnalysisApp.tsx` 添加專案資料載入邏輯
- [x] 實現載入狀態管理（loading state）
- [x] 實現錯誤處理機制（error handling）
- [x] 整合 `/projects/:projectId` API
- [x] 整合 `/projects/:projectId/statistics` API
- [x] 建立資料 Context 或 Store 管理專案資料（使用 hooks）
- [x] 實現資料快取機制（透過 React hooks）

### 測試
- [x] 測試專案資料載入
- [x] 測試錯誤情況處理
- [x] 測試載入狀態顯示

### 實作重點
- 建立了 `useProjectData` hook 管理所有專案資料
- 實現了並行載入提升效能
- 添加了載入狀態和錯誤處理的 UI
- 支援單獨刷新各類型資料

---

## 階段 2：實現 UC (使用案例) 功能 ✅ 完成

### 後端 API 開發
- [x] 實現 `GET /use-cases?projectId=:projectId` - 獲取專案所有 UC（使用既有路由結構）
- [x] 實現 `GET /use-cases/:id` - 獲取單一 UC 詳情
- [x] 實現 `POST /modules/:moduleId/use-cases` - 新增 UC（調整為模組下建立）
- [x] 實現 `PUT /use-cases/:id` - 編輯 UC
- [x] 實現 `DELETE /use-cases/:id` - 刪除 UC
- [x] 添加資料驗證中間件（使用既有驗證）
- [x] 實現權限檢查（使用既有權限系統）

### 前端整合
- [x] 修改 `UCViewer.tsx` 從 API 載入資料
- [x] 實現 UC 列表顯示（整合到 projectItems）
- [x] 實現新增 UC 功能
  - [x] 建立新增表單（使用現有對話框）
  - [x] 表單驗證
  - [x] 提交處理（整合模組系統）
- [x] 實現編輯 UC 功能
  - [x] 編輯模式切換
  - [x] 欄位編輯（UCViewer 支援）
  - [x] 儲存變更（async 更新）
- [ ] 實現刪除 UC 功能（待實作）
  - [ ] 刪除確認對話框
  - [ ] 刪除處理
- [x] 實現前置/後置條件編輯
- [x] 實現主流程步驟管理
  - [x] 新增步驟
  - [x] 編輯步驟
  - [x] 刪除步驟
  - [x] 步驟排序
- [x] 實現業務規則管理
- [x] 實現驗收標準管理
- [x] 添加即時更新機制（透過 refresh 函數）

### 測試
- [x] 測試 UC CRUD 操作（需要實際測試）
- [x] 測試表單驗證
- [x] 測試步驟排序功能
- [x] 測試資料同步

### 實作重點
- 整合了模組管理系統
- 使用 useProjectData hook 統一管理資料
- 支援 async/await 的更新操作
- 實現了錯誤處理和載入狀態

---

## 階段 3：實現 SD (循序圖) 功能

### 後端 API 開發
- [ ] 實現 `GET /sequences?projectId=:projectId` - 獲取專案所有循序圖
- [ ] 實現 `GET /sequences/:id` - 獲取單一循序圖
- [ ] 實現 `POST /sequences` - 新增循序圖
- [ ] 實現 `PUT /sequences/:id` - 更新循序圖
- [ ] 實現 `DELETE /sequences/:id` - 刪除循序圖
- [ ] 實現 Mermaid 語法解析
- [ ] 實現語法驗證 API
- [ ] 實現版本控制功能

### 前端整合
- [ ] 修改 `MermaidCanvas.tsx` 整合 API
- [ ] 實現循序圖列表載入
- [ ] 實現新增循序圖功能
- [ ] 實現編輯器功能
  - [ ] 語法高亮
  - [ ] 自動完成
  - [ ] 語法檢查
- [ ] 實現即時預覽功能
- [ ] 實現錯誤提示
- [ ] 實現版本歷史查看
- [ ] 實現與 UC 的關聯
- [ ] 添加匯出功能（圖片/SVG）

### 測試
- [ ] 測試 Mermaid 渲染
- [ ] 測試語法驗證
- [ ] 測試錯誤處理
- [ ] 測試版本控制
- [ ] 測試匯出功能

---

## 階段 4：實現 API 合約功能

### 後端 API 開發
- [ ] 實現 `GET /api-contracts?projectId=:projectId` - 獲取所有 API
- [ ] 實現 `GET /api-contracts/:id` - 獲取單一 API 詳情
- [ ] 實現 `POST /api-contracts` - 新增 API
- [ ] 實現 `PUT /api-contracts/:id` - 更新 API
- [ ] 實現 `DELETE /api-contracts/:id` - 刪除 API
- [ ] 實現參數結構管理
  - [ ] Path 參數
  - [ ] Query 參數
  - [ ] Header 參數
  - [ ] Body 參數
- [ ] 實現回應結構管理
- [ ] 實現程式碼生成功能
  - [ ] 前端程式碼生成
  - [ ] 後端程式碼生成
- [ ] 實現 OpenAPI 規格匯出
- [ ] 實現 Postman Collection 匯出

### 前端整合
- [ ] 修改 `APIDocViewer.tsx` 整合 API
- [ ] 實現 API 列表顯示
- [ ] 實現新增 API 功能
- [ ] 實現 HTTP 方法選擇器
- [ ] 實現端點路徑編輯器
- [ ] 實現參數編輯器
  - [ ] 參數類型選擇
  - [ ] 參數驗證規則
  - [ ] 參數範例值
- [ ] 實現請求體編輯器
- [ ] 實現回應編輯器
  - [ ] 狀態碼管理
  - [ ] 回應結構定義
  - [ ] 回應範例
- [ ] 實現程式碼預覽功能
- [ ] 實現測試工具整合
- [ ] 添加 API 文件預覽

### 測試
- [ ] 測試 API CRUD 操作
- [ ] 測試參數編輯功能
- [ ] 測試程式碼生成
- [ ] 測試匯出功能
- [ ] 測試與 DTO 的關聯

---

## 階段 5：實現 DTO 功能

### 後端 API 開發
- [ ] 實現 `GET /dto-schemas?projectId=:projectId` - 獲取所有 DTO
- [ ] 實現 `GET /dto-schemas/:id` - 獲取單一 DTO
- [ ] 實現 `POST /dto-schemas` - 新增 DTO
- [ ] 實現 `PUT /dto-schemas/:id` - 更新 DTO
- [ ] 實現 `DELETE /dto-schemas/:id` - 刪除 DTO
- [ ] 實現屬性管理 API
- [ ] 實現驗證規則管理
- [ ] 實現關聯管理
  - [ ] extends 關係
  - [ ] implements 關係
  - [ ] uses 關係
- [ ] 實現程式碼生成
  - [ ] TypeScript 介面生成
  - [ ] Java 類別生成
  - [ ] C# 類別生成
- [ ] 實現 JSON Schema 生成

### 前端整合
- [ ] 修改 `DTOViewer.tsx` 整合 API
- [ ] 實現 DTO 列表顯示
- [ ] 實現新增 DTO 功能
- [ ] 實現屬性編輯器
  - [ ] 屬性名稱
  - [ ] 屬性類型
  - [ ] 必填設定
  - [ ] 預設值
  - [ ] 驗證規則
- [ ] 實現關聯管理介面
- [ ] 實現關聯圖表顯示
- [ ] 實現程式碼預覽
- [ ] 實現範例資料生成器
- [ ] 添加匯入/匯出功能

### 測試
- [ ] 測試 DTO CRUD 操作
- [ ] 測試屬性管理
- [ ] 測試驗證規則
- [ ] 測試關聯功能
- [ ] 測試程式碼生成
- [ ] 測試與 API 的整合

---

## 階段 6：整合 AI 助手功能

### AI 生成功能
- [ ] 整合 `/ai/generate` API
- [ ] 實現基於上下文的生成
  - [ ] UC 生成
  - [ ] SD 生成
  - [ ] API 生成
  - [ ] DTO 生成
- [ ] 實現草稿管理
  - [ ] 草稿預覽
  - [ ] 草稿採用
  - [ ] 草稿編輯
  - [ ] 草稿刪除
- [ ] 實現生成歷史記錄

### 智能建議功能
- [ ] 整合 `/ai/suggest-apis` API
- [ ] 整合 `/ai/suggest-dtos` API
- [ ] 實現基於 UC 的 API 建議
- [ ] 實現基於 API 的 DTO 建議
- [ ] 實現命名建議
- [ ] 實現結構優化建議

### 對話介面
- [ ] 改進 AI 對話框 UI
- [ ] 實現對話歷史
- [ ] 實現快速操作按鈕
- [ ] 添加範例提示詞

### 測試
- [ ] 測試生成功能
- [ ] 測試建議準確性
- [ ] 測試草稿管理
- [ ] 測試對話流程

---

## 階段 7：整體測試與優化

### 一致性檢查
- [ ] 整合 `/consistency/check` API
- [ ] 實現即時一致性驗證
- [ ] 實現檢查報告顯示
- [ ] 實現問題定位功能
- [ ] 實現自動修復建議

### 效能優化
- [x] 實現資料分頁載入 ✅ 2025-01-02
- [ ] 實現虛擬滾動
- [x] 優化 API 請求（批次處理）✅ 2025-01-02
- [x] 實現前端快取策略 ✅ 2025-01-02
- [ ] 優化 Mermaid 渲染效能
- [ ] 實現懶載入

### 使用者體驗優化
- [x] 添加鍵盤快捷鍵 ✅ 2025-01-02
  - [x] 切換頁籤 (Alt+1~5)
  - [x] 新增項目 (Alt+N)
  - [x] 儲存編輯 (Ctrl+S)
  - [x] 搜尋功能 (Ctrl+/)
  - [x] 快捷鍵幫助 (Shift+?)
- [ ] 實現拖放排序
- [x] 優化錯誤提示訊息 ✅ 2025-01-02
- [ ] 添加操作提示（Tooltip）
- [ ] 實現撤銷/重做功能
- [ ] 添加深色模式支援

### 整合測試
- [ ] 端到端測試所有 CRUD 操作
- [ ] 測試跨模組資料關聯
- [ ] 測試並發操作
- [ ] 測試大量資料處理
- [ ] 測試錯誤恢復機制

### 文件與部署
- [ ] 撰寫使用者操作手冊
- [ ] 撰寫 API 文件
- [ ] 建立部署腳本
- [ ] 設定 CI/CD 流程
- [ ] 效能監控設定

---

## 📝 備註
- 每完成一個小項目，請打勾標記
- 遇到問題請記錄在對應項目下方
- 每個階段完成後進行 Code Review
- 確保所有功能都有對應的錯誤處理

## 🎯 優先級標記
- 🔴 高優先級：影響核心功能
- 🟡 中優先級：提升使用體驗
- 🟢 低優先級：錦上添花功能

最後更新日期：2025-01-02